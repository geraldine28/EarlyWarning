<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Data Science - GDS">
<meta name="dcterms.date" content="2025-02-24">

<title>Early Warning System Model Evaluation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="evaluation_report_files/libs/clipboard/clipboard.min.js"></script>
<script src="evaluation_report_files/libs/quarto-html/quarto.js"></script>
<script src="evaluation_report_files/libs/quarto-html/popper.min.js"></script>
<script src="evaluation_report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="evaluation_report_files/libs/quarto-html/anchor.min.js"></script>
<link href="evaluation_report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="evaluation_report_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="evaluation_report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="evaluation_report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="evaluation_report_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="evaluation_report_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="evaluation_report_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="evaluation_report_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="evaluation_report_files/libs/datatables-binding-0.33/datatables.js"></script>

<script src="evaluation_report_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="evaluation_report_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="evaluation_report_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="evaluation_report_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

<script src="evaluation_report_files/libs/jszip-1.13.6/jszip.min.js"></script>

<script src="evaluation_report_files/libs/pdfmake-1.13.6/pdfmake.js"></script>

<script src="evaluation_report_files/libs/pdfmake-1.13.6/vfs_fonts.js"></script>

<link href="evaluation_report_files/libs/dt-ext-buttons-1.13.6/css/buttons.dataTables.min.css" rel="stylesheet">

<script src="evaluation_report_files/libs/dt-ext-buttons-1.13.6/js/dataTables.buttons.min.js"></script>

<script src="evaluation_report_files/libs/dt-ext-buttons-1.13.6/js/buttons.html5.min.js"></script>

<script src="evaluation_report_files/libs/dt-ext-buttons-1.13.6/js/buttons.colVis.min.js"></script>

<script src="evaluation_report_files/libs/dt-ext-buttons-1.13.6/js/buttons.print.min.js"></script>

<link href="evaluation_report_files/libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">

<script src="evaluation_report_files/libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>

<link href="evaluation_report_files/libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">

<script src="evaluation_report_files/libs/selectize-0.12.0/selectize.min.js"></script>

<link href="evaluation_report_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="evaluation_report_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#metric-explanation" id="toc-metric-explanation" class="nav-link" data-scroll-target="#metric-explanation"><span class="header-section-number">2</span> Metric Explanation</a>
  <ul class="collapse">
  <li><a href="#log-loss-cross-entropy-loss" id="toc-log-loss-cross-entropy-loss" class="nav-link" data-scroll-target="#log-loss-cross-entropy-loss"><span class="header-section-number">2.1</span> Log Loss (Cross-Entropy Loss)</a></li>
  <li><a href="#brier-score" id="toc-brier-score" class="nav-link" data-scroll-target="#brier-score"><span class="header-section-number">2.2</span> Brier Score</a></li>
  <li><a href="#expected-calibration-error-ece" id="toc-expected-calibration-error-ece" class="nav-link" data-scroll-target="#expected-calibration-error-ece"><span class="header-section-number">2.3</span> Expected Calibration Error (ECE)</a></li>
  <li><a href="#maximum-calibration-error-mce" id="toc-maximum-calibration-error-mce" class="nav-link" data-scroll-target="#maximum-calibration-error-mce"><span class="header-section-number">2.4</span> Maximum Calibration Error (MCE)</a></li>
  <li><a href="#entropy-score" id="toc-entropy-score" class="nav-link" data-scroll-target="#entropy-score"><span class="header-section-number">2.5</span> Entropy Score</a></li>
  </ul></li>
  <li><a href="#plot-explanations" id="toc-plot-explanations" class="nav-link" data-scroll-target="#plot-explanations"><span class="header-section-number">3</span> Plot Explanations</a>
  <ul class="collapse">
  <li><a href="#calibration-plots" id="toc-calibration-plots" class="nav-link" data-scroll-target="#calibration-plots"><span class="header-section-number">3.1</span> Calibration Plots</a></li>
  <li><a href="#reliability-diagrams" id="toc-reliability-diagrams" class="nav-link" data-scroll-target="#reliability-diagrams"><span class="header-section-number">3.2</span> Reliability Diagrams</a></li>
  <li><a href="#roc-curves" id="toc-roc-curves" class="nav-link" data-scroll-target="#roc-curves"><span class="header-section-number">3.3</span> ROC Curves</a></li>
  <li><a href="#density-plots" id="toc-density-plots" class="nav-link" data-scroll-target="#density-plots"><span class="header-section-number">3.4</span> Density Plots</a></li>
  </ul></li>
  <li><a href="#evaluation-data" id="toc-evaluation-data" class="nav-link" data-scroll-target="#evaluation-data"><span class="header-section-number">4</span> Evaluation Data</a></li>
  <li><a href="#march-2024-predictions" id="toc-march-2024-predictions" class="nav-link" data-scroll-target="#march-2024-predictions"><span class="header-section-number">5</span> March 2024 Predictions</a>
  <ul class="collapse">
  <li><a href="#fundamental-model-performance-metrics-and-their-implications" id="toc-fundamental-model-performance-metrics-and-their-implications" class="nav-link" data-scroll-target="#fundamental-model-performance-metrics-and-their-implications"><span class="header-section-number">5.1</span> Fundamental Model Performance Metrics and Their Implications</a></li>
  <li><a href="#uncertainty-and-information-content" id="toc-uncertainty-and-information-content" class="nav-link" data-scroll-target="#uncertainty-and-information-content"><span class="header-section-number">5.2</span> Uncertainty and Information Content</a></li>
  <li><a href="#calibration-and-reliability" id="toc-calibration-and-reliability" class="nav-link" data-scroll-target="#calibration-and-reliability"><span class="header-section-number">5.3</span> Calibration and Reliability</a></li>
  <li><a href="#discriminative-ability" id="toc-discriminative-ability" class="nav-link" data-scroll-target="#discriminative-ability"><span class="header-section-number">5.4</span> Discriminative Ability</a></li>
  <li><a href="#behaviour-of-class-one" id="toc-behaviour-of-class-one" class="nav-link" data-scroll-target="#behaviour-of-class-one"><span class="header-section-number">5.5</span> Behaviour of Class One</a></li>
  </ul></li>
  <li><a href="#may-2024-predictions" id="toc-may-2024-predictions" class="nav-link" data-scroll-target="#may-2024-predictions"><span class="header-section-number">6</span> May 2024 Predictions</a>
  <ul class="collapse">
  <li><a href="#fundamental-model-performance-metrics-and-their-implications-1" id="toc-fundamental-model-performance-metrics-and-their-implications-1" class="nav-link" data-scroll-target="#fundamental-model-performance-metrics-and-their-implications-1"><span class="header-section-number">6.1</span> Fundamental Model Performance Metrics and Their Implications</a></li>
  <li><a href="#uncertainty-and-information-content-1" id="toc-uncertainty-and-information-content-1" class="nav-link" data-scroll-target="#uncertainty-and-information-content-1"><span class="header-section-number">6.2</span> Uncertainty and Information Content</a></li>
  <li><a href="#calibration-and-reliability-1" id="toc-calibration-and-reliability-1" class="nav-link" data-scroll-target="#calibration-and-reliability-1"><span class="header-section-number">6.3</span> Calibration and Reliability</a></li>
  <li><a href="#discriminative-ability-1" id="toc-discriminative-ability-1" class="nav-link" data-scroll-target="#discriminative-ability-1"><span class="header-section-number">6.4</span> Discriminative Ability</a></li>
  </ul></li>
  <li><a href="#june-2024-predictions" id="toc-june-2024-predictions" class="nav-link" data-scroll-target="#june-2024-predictions"><span class="header-section-number">7</span> June 2024 Predictions</a>
  <ul class="collapse">
  <li><a href="#fundamental-model-performance-metrics-and-their-implications-2" id="toc-fundamental-model-performance-metrics-and-their-implications-2" class="nav-link" data-scroll-target="#fundamental-model-performance-metrics-and-their-implications-2"><span class="header-section-number">7.1</span> Fundamental Model Performance Metrics and Their Implications</a></li>
  <li><a href="#calibration-and-uncertainty-patterns" id="toc-calibration-and-uncertainty-patterns" class="nav-link" data-scroll-target="#calibration-and-uncertainty-patterns"><span class="header-section-number">7.2</span> Calibration and Uncertainty Patterns</a></li>
  <li><a href="#threshold-dependent-performance" id="toc-threshold-dependent-performance" class="nav-link" data-scroll-target="#threshold-dependent-performance"><span class="header-section-number">7.3</span> Threshold-Dependent Performance</a></li>
  <li><a href="#stability-in-discriminative-ability" id="toc-stability-in-discriminative-ability" class="nav-link" data-scroll-target="#stability-in-discriminative-ability"><span class="header-section-number">7.4</span> Stability in Discriminative Ability</a></li>
  </ul></li>
  <li><a href="#july-2024-predictions" id="toc-july-2024-predictions" class="nav-link" data-scroll-target="#july-2024-predictions"><span class="header-section-number">8</span> July 2024 Predictions</a></li>
  <li><a href="#cross-monthly-comparison" id="toc-cross-monthly-comparison" class="nav-link" data-scroll-target="#cross-monthly-comparison"><span class="header-section-number">9</span> Cross-Monthly Comparison</a>
  <ul class="collapse">
  <li><a href="#performance-metrics-across-time" id="toc-performance-metrics-across-time" class="nav-link" data-scroll-target="#performance-metrics-across-time"><span class="header-section-number">9.1</span> Performance Metrics Across Time</a>
  <ul class="collapse">
  <li><a href="#log-loss-performance" id="toc-log-loss-performance" class="nav-link" data-scroll-target="#log-loss-performance"><span class="header-section-number">9.1.1</span> Log Loss Performance</a></li>
  <li><a href="#brier-score-evolution" id="toc-brier-score-evolution" class="nav-link" data-scroll-target="#brier-score-evolution"><span class="header-section-number">9.1.2</span> Brier Score Evolution</a></li>
  <li><a href="#entropy-score-patterns" id="toc-entropy-score-patterns" class="nav-link" data-scroll-target="#entropy-score-patterns"><span class="header-section-number">9.1.3</span> Entropy Score Patterns</a></li>
  </ul></li>
  <li><a href="#calibration-stability" id="toc-calibration-stability" class="nav-link" data-scroll-target="#calibration-stability"><span class="header-section-number">9.2</span> Calibration Stability</a>
  <ul class="collapse">
  <li><a href="#expected-calibration-error-analysis" id="toc-expected-calibration-error-analysis" class="nav-link" data-scroll-target="#expected-calibration-error-analysis"><span class="header-section-number">9.2.1</span> Expected Calibration Error Analysis</a></li>
  <li><a href="#maximum-calibration-error-patterns" id="toc-maximum-calibration-error-patterns" class="nav-link" data-scroll-target="#maximum-calibration-error-patterns"><span class="header-section-number">9.2.2</span> Maximum Calibration Error Patterns</a></li>
  <li><a href="#threshold-dependent-calibration-stability" id="toc-threshold-dependent-calibration-stability" class="nav-link" data-scroll-target="#threshold-dependent-calibration-stability"><span class="header-section-number">9.2.3</span> Threshold-Dependent Calibration Stability</a></li>
  </ul></li>
  <li><a href="#threshold-dependent-patterns" id="toc-threshold-dependent-patterns" class="nav-link" data-scroll-target="#threshold-dependent-patterns"><span class="header-section-number">9.3</span> Threshold-Dependent Patterns</a>
  <ul class="collapse">
  <li><a href="#performance-differentiation-across-thresholds" id="toc-performance-differentiation-across-thresholds" class="nav-link" data-scroll-target="#performance-differentiation-across-thresholds"><span class="header-section-number">9.3.1</span> Performance Differentiation Across Thresholds</a></li>
  <li><a href="#entropy-and-prediction-confidence" id="toc-entropy-and-prediction-confidence" class="nav-link" data-scroll-target="#entropy-and-prediction-confidence"><span class="header-section-number">9.3.2</span> Entropy and Prediction Confidence</a></li>
  <li><a href="#calibration-properties-across-thresholds" id="toc-calibration-properties-across-thresholds" class="nav-link" data-scroll-target="#calibration-properties-across-thresholds"><span class="header-section-number">9.3.3</span> Calibration Properties Across Thresholds</a></li>
  <li><a href="#discriminative-ability-and-threshold-effects" id="toc-discriminative-ability-and-threshold-effects" class="nav-link" data-scroll-target="#discriminative-ability-and-threshold-effects"><span class="header-section-number">9.3.4</span> Discriminative Ability and Threshold Effects</a></li>
  </ul></li>
  <li><a href="#prediction-horizon-effects" id="toc-prediction-horizon-effects" class="nav-link" data-scroll-target="#prediction-horizon-effects"><span class="header-section-number">9.4</span> Prediction Horizon Effects</a>
  <ul class="collapse">
  <li><a href="#temporal-degradation-patterns" id="toc-temporal-degradation-patterns" class="nav-link" data-scroll-target="#temporal-degradation-patterns"><span class="header-section-number">9.4.1</span> Temporal Degradation Patterns</a></li>
  <li><a href="#horizon-dependent-uncertainty" id="toc-horizon-dependent-uncertainty" class="nav-link" data-scroll-target="#horizon-dependent-uncertainty"><span class="header-section-number">9.4.2</span> Horizon-Dependent Uncertainty</a></li>
  <li><a href="#calibration-stability-across-horizons" id="toc-calibration-stability-across-horizons" class="nav-link" data-scroll-target="#calibration-stability-across-horizons"><span class="header-section-number">9.4.3</span> Calibration Stability Across Horizons</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#conclusions-and-recommendations" id="toc-conclusions-and-recommendations" class="nav-link" data-scroll-target="#conclusions-and-recommendations"><span class="header-section-number">10</span> Conclusions and Recommendations</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Early Warning System Model Evaluation</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Data Science - GDS </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 24, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>The Early Warning App for forced displacement was developed in 2023 to support humanitarian preparedness and response planning. The model analyses various data sources to generate monthly predictions of forced displacement risks for different countries. These predictions serve two distinct purposes: First, they estimate the probability that a country will generate forced displacement above specific thresholds over different time horizons (1, 3, and 6 months ahead). Second, they assess the likelihood of sudden increases in displacement numbers, which often indicate new crises or the deterioration of existing situations.</p>
<p>The Early Warning App operates through a three-class classification model. Class 1 identifies situations where displacement not only exceeds specified thresholds but also shows abrupt increases, signaling potential crisis escalation. Class 2 captures sustained high displacement scenarios where numbers exceed thresholds without sudden changes. Class 3 represents baseline conditions where displacement remains below the defined thresholds.</p>
<p>Since its implementation, the model has generated monthly predictions, creating a substantial dataset for evaluation. This document analyses the model’s performance by comparing its predictions from March, May, June, and July 2024 with actual displacement data from the nowcasting flow modelling. This comparison across multiple months and different prediction horizons allows for a comprehensive assessment of the model’s predictive capabilities, reliability, and potential operational value.</p>
<p>The evaluation examines four different annual thresholds (2000, 5000, 10000, and 25000 displaced persons) and three prediction horizons (1, 3, and 6 months), providing insights into how the model performs across different scales of displacement and time frames. This analysis aims to understand both the model’s current capabilities and areas where it might be enhanced to better serve humanitarian planning needs.</p>
</section>
<section id="metric-explanation" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Metric Explanation</h1>
<section id="log-loss-cross-entropy-loss" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="log-loss-cross-entropy-loss"><span class="header-section-number">2.1</span> Log Loss (Cross-Entropy Loss)</h2>
<p>Log loss measures how well the predicted probabilities align with actual outcomes. For our multi-class scenario with 3 classes, the formula is:</p>
<p><span class="math display">\[
\text{LogLoss} = - \frac{1}{N} \sum_j \sum_i y_{ij} * \log( p_{ij})
\]</span> where <span class="math inline">\(y_{ij}\)</span> is 1 if observation <span class="math inline">\(i\)</span> belongs to class <span class="math inline">\(j\)</span> and 0 otherwise, and <span class="math inline">\(p_{ij}\)</span> is the predicted probability. The score ranges from 0 to <span class="math inline">\(\infty\)</span>, where:</p>
<ul>
<li>0 represents perfect predictions (impossible in practice)</li>
<li>Values closer to 0 indicate better performance</li>
<li>Typical good values range from 0.1 to 0.3</li>
</ul>
</section>
<section id="brier-score" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="brier-score"><span class="header-section-number">2.2</span> Brier Score</h2>
<p>The Brier score measures the accuracy of probabilistic predictions, calculated as:</p>
<p><span class="math display">\[
\text{Brier} = \frac{1}{N} \sum_j \sum_i ( p_{ij} - y_{ij})^2
\]</span></p>
<p>It ranges from 0 to 1, where:</p>
<ul>
<li>0 indicates perfect predictions</li>
<li>1 indicates worst possible predictions</li>
<li>Values below 0.25 are generally considered good for a 3-class problem</li>
</ul>
</section>
<section id="expected-calibration-error-ece" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="expected-calibration-error-ece"><span class="header-section-number">2.3</span> Expected Calibration Error (ECE)</h2>
<p>ECE measures the difference between predicted probabilities and actual frequencies, calculated by binning predictions and computing:</p>
<p><span class="math display">\[
\operatorname{ECE} = \sum_i \left(\frac{\text{bin\_size}}{n}\right) \left|a_i - c_i \right|
\]</span> where</p>
<ul>
<li><span class="math inline">\(a_i\)</span> is the accuracy in bin <span class="math inline">\(i\)</span> (actual frequency of positive outcomes)</li>
<li><span class="math inline">\(c_i\)</span> is the average confidence (predicted probability) in bin <span class="math inline">\(i\)</span></li>
</ul>
<p>Ranges from 0 to 1, where:</p>
<ul>
<li>0 indicates perfect calibration</li>
<li>Lower values are better</li>
<li>Values below 0.1 are typically considered good</li>
</ul>
</section>
<section id="maximum-calibration-error-mce" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="maximum-calibration-error-mce"><span class="header-section-number">2.4</span> Maximum Calibration Error (MCE)</h2>
<p>The Maximum Calibration Error (MCE) is closely related to ECE but focuses on the worst-case scenario of model calibration. It is calculated as</p>
<p><span class="math display">\[
\mathrm{MCE} = \max_i |a_i - c_i|
\]</span> where</p>
<ul>
<li><span class="math inline">\(a_i\)</span> is the accuracy in bin <span class="math inline">\(i\)</span> (actual frequency of positive outcomes)</li>
<li><span class="math inline">\(c_i\)</span> is the average confidence (predicted probability) in bin <span class="math inline">\(i\)</span></li>
<li>The max operation selects the largest absolute difference across all bins</li>
</ul>
<p>MCE ranges from 0 to 1, where:</p>
<ul>
<li>0 indicates perfect calibration in all bins</li>
<li>1 indicates a maximum possible miscalibration</li>
<li>Values below 0.15 are typically considered excellent</li>
<li>Values above 0.3 suggest significant calibration issues in at least one probability range</li>
</ul>
<p>The relationship between ECE and MCE provides important insights:</p>
<ul>
<li>ECE ≤ MCE always holds true (the average error cannot exceed the maximum error)</li>
<li>A large gap between ECE and MCE suggests that severe miscalibration is concentrated in small and specific probability ranges</li>
<li>A small gap suggests more uniform calibration errors across probability ranges</li>
</ul>
</section>
<section id="entropy-score" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="entropy-score"><span class="header-section-number">2.5</span> Entropy Score</h2>
<p>The entropy score measures the uncertainty in the model’s predictions, calculated as:</p>
<p><span class="math display">\[
H(p) = - \sum_ i p_i \cdot \log(p_i)
\]</span></p>
<p>Ranges from 0 to <span class="math inline">\(\ln(N)\)</span>:</p>
<ul>
<li>values below 0.2 are considered excellent and</li>
<li>values greater 0.6 indicate high uncertainty</li>
</ul>
</section>
</section>
<section id="plot-explanations" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Plot Explanations</h1>
<section id="calibration-plots" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="calibration-plots"><span class="header-section-number">3.1</span> Calibration Plots</h2>
<p>Calibration plots compare predicted probabilities (x-axis) with observed frequencies (y-axis) in each probability bin (usually 10 bins). In this analysis we use a LOESS approximation of the bins to smooth out the curve in order to make trends more visible. A perfectly calibrated model would follow the diagonal line <span class="math inline">\(y=x\)</span>, meaning that when the model predicts a 60% probability, the event occurs about 60% of the time. Points above the diagonal indicate under confidence (the model’s predictions are too low given the true frequency of the class), while points below indicate overconfidence (predictions are too high given the true freqency of the class). The accompanying histogram at the bottom shows how many predictions fall into each probability bin, helping us understand where the model’s predictions are concentrated and how deviations between the curves are weighted. The weighted mean of all the gaps between the two curves is equivalent with the ECE and the largest error for a probability range or bin produces the MCE.</p>
<p>The calibration plots include three key parameters that help assess the model’s probability estimates. The c-statistic, also known as the concordance statistic or AUC (Area Under the Curve), measures the model’s ability to discriminate between classes. It ranges from 0.5 (random guessing) to 1.0 (perfect discrimination), with values above 0.8 indicating good discriminative ability.</p>
<p>The calibration slope (c1) indicates whether the model’s predicted probabilities are appropriately scaled. A slope of 1.0 represents ideal calibration. Values below 1.0 suggest the model is over confident, making predictions that are too extreme, while values above 1.0 indicate under confidence, with predictions that are too conservative.</p>
<p>The calibration intercept (c0) reveals systematic bias in the predictions. An intercept of 0 indicates no systematic bias. Positive values suggest the model systematically underestimates probabilities, while negative values indicate systematic overestimation.</p>
<p>These parameters together provide a comprehensive assessment of model calibration and can guide potential recalibration efforts to improve the reliability of predicted probabilities.</p>
</section>
<section id="reliability-diagrams" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="reliability-diagrams"><span class="header-section-number">3.2</span> Reliability Diagrams</h2>
<p>These diagrams extend the calibration concept by showing class-specific calibration patterns. For each class, we see how well the predicted probabilities match actual outcomes. The bars represent confidence intervals, helping to assess the statistical significance of any deviations from perfect calibration. Wide confidence intervals typically appear in regions with fewer predictions, as shown in the figures below. The gap between the curve and the diagonal represents the calibration error, with the ECE measuring the weighted average of these gaps and MCE showing the largest gap.</p>
</section>
<section id="roc-curves" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="roc-curves"><span class="header-section-number">3.3</span> ROC Curves</h2>
<p>Receiver Operating Characteristic (ROC) curves plot the true positive rate against the false positive rate at various classification thresholds. The curves show how well the model can distinguish between classes regardless of calibration. A curve following the diagonal would indicate random guessing, while a curve reaching the top-left corner indicates perfect discrimination. The area under the curve (AUC) provides a single number summarizing discriminative ability, with values above 0.8 considered good and above 0.9 excellent. For our multi-class setting, we see ROC curves for each class, helping us understand where the model excels or struggles in distinguishing specific types of displacement events.</p>
</section>
<section id="density-plots" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="density-plots"><span class="header-section-number">3.4</span> Density Plots</h2>
<p>These plots show the distribution of predicted probabilities for each class. The x-axis represents the predicted probability (from 0 to 1), while the y-axis shows the density of predictions at each probability level. Higher peaks indicate more predictions clustered around that probability value. These plots show how confident the model is in its predictions for class one. Well-separated peaks suggest good discrimination between class one and the other classes, while overlapping distributions might indicate areas where the model has difficulty distinguishing between classes.</p>
</section>
</section>
<section id="evaluation-data" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Evaluation Data</h1>
<p>We use the predictions from March, May, June, and July for this analysis and compare the predictions with the nowcasting flow data from November 2024, which include all nowcasting flows until October 2024.</p>
<p>This means that we do not yet have a full set of six months original values for all evaluation months, which should be kept in mind when evaluating the results. Particularly with regard to the evaluation of the temporal degradation of the predictions as the prediction horizon increases. March is the the only evaluation months for which we have the full set of true classes for all six months ahead. This reduces to five months for May, four months for June, and three months for July.</p>
<p>Another issue is the sparsity of class one in the true classes. Class one is sometimes absent or only has one incident, which impacts some of the evaluations. The below tables show the incidents of class one in the flow data for the different prediction horizons and threshold levels.</p>
<table class="caption-top table">
<caption>March</caption>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;">2000</th>
<th style="text-align: center;">5000</th>
<th style="text-align: center;">10000</th>
<th style="text-align: center;">25000</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td>3</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td>6</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">4</td>
</tr>
</tbody>
</table>
<table class="caption-top table">
<caption>May</caption>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;">2000</th>
<th style="text-align: center;">5000</th>
<th style="text-align: center;">10000</th>
<th style="text-align: center;">25000</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td>3</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
</tr>
<tr class="odd">
<td>6</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
</tr>
</tbody>
</table>
<table class="caption-top table">
<caption>June</caption>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;">2000</th>
<th style="text-align: center;">5000</th>
<th style="text-align: center;">10000</th>
<th style="text-align: center;">25000</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
</tr>
<tr class="even">
<td>3</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td>6</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
</tr>
</tbody>
</table>
<table class="caption-top table">
<caption>July</caption>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;">2000</th>
<th style="text-align: center;">5000</th>
<th style="text-align: center;">10000</th>
<th style="text-align: center;">25000</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td>3</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
</tr>
<tr class="odd">
<td>6</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
</tr>
</tbody>
</table>
<p>For May, June, and July, the sparsity of class one is aggravated by the fact that not all six months are available yet in the flow data.</p>
</section>
<section id="march-2024-predictions" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> March 2024 Predictions</h1>
<section id="fundamental-model-performance-metrics-and-their-implications" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="fundamental-model-performance-metrics-and-their-implications"><span class="header-section-number">5.1</span> Fundamental Model Performance Metrics and Their Implications</h2>
<p>The model’s performance can be understood through several complementary metrics, each revealing different aspects of its predictive capabilities. The log loss metric provides our primary measure of prediction accuracy.</p>
<p>The log loss scores reveal a clear pattern of improving model performance as the displacement threshold increases. For the lowest threshold of 2000 yearly displaced persons, the model shows moderate performance with log loss values ranging from 0.26 to 0.31 across different prediction horizons. As we move to higher thresholds, particularly at 25,000, the performance notably improves with log loss values dropping to rather low values of 0.17-0.19. This improvement in performance for higher thresholds is particularly significant as it indicates the model’s strength in identifying larger displacement events. The pattern makes intuitive sense because larger displacement events typically stem from more distinct and detectable crisis situations, making them easier for the model to predict accurately. This characteristic is especially valuable for UNHCR, where identifying large-scale displacements is crucial for resource allocation.</p>
<p>We can observe a similar pattern for the Brier score, which overall returns good values below 0.2, but excellent values <span class="math inline">\(&lt;0.1\)</span> for higher threshold values.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-335d6c21f5194950e3e5" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-335d6c21f5194950e3e5">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2000\" data-max=\"25000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"6\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.08\" data-max=\"0.49\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption style=\"caption-side: top; &#10;                 text-align: center; &#10;                 font-size: 120%;    &#10;                 font-weight: bold;\">March metrics - Logloss, Brier Score, Entropy Score<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36"],["log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score"],[2000,2000,2000,5000,5000,5000,10000,10000,10000,25000,25000,25000,2000,2000,2000,5000,5000,5000,10000,10000,10000,25000,25000,25000,2000,2000,2000,5000,5000,5000,10000,10000,10000,25000,25000,25000],[1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6],[0.26,0.28,0.31,0.24,0.24,0.26,0.19,0.19,0.2,0.19,0.18,0.17,0.12,0.14,0.16,0.13,0.12,0.14,0.1,0.1,0.1,0.09,0.09,0.08,0.36,0.35,0.49,0.31,0.32,0.32,0.28,0.27,0.3,0.23,0.21,0.23]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>metric_type<\/th>\n      <th>threshold<\/th>\n      <th>horizon<\/th>\n      <th>value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":12,"scrollX":true,"dom":"Bfrtip","buttons":["copy","csv","excel","pdf"],"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"metric_type","targets":1},{"name":"threshold","targets":2},{"name":"horizon","targets":3},{"name":"value","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[10,12,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="uncertainty-and-information-content" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="uncertainty-and-information-content"><span class="header-section-number">5.2</span> Uncertainty and Information Content</h2>
<p>The entropy scores provide crucial insights into the model’s predictive confidence, measuring the inherent uncertainty in the model’s predictions. Our analysis reveals a systematic pattern: lower thresholds (2000 displaced persons) show higher entropy (0.35-0.49), while higher thresholds (25000 displaced persons) demonstrate lower entropy (0.21-0.23). This pattern indicates that larger displacement events likely have more distinct and detectable precursors, leading to more confident predictions.</p>
<p>The temporal dimension of entropy scores is particularly revealing. For the 2000-person threshold, we observe a 36% increase in entropy from the 1-month horizon (0.36) to the 6-month horizon (0.49). This substantial increase in uncertainty for longer-term predictions of smaller displacement events contrasts with the relatively stable entropy scores for higher thresholds across time horizons. This stability suggests that major displacement events leave longer-lasting and more detectable signals in our predictor variables.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-bc4e90b8a5970d1d64e5" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-bc4e90b8a5970d1d64e5">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2000\" data-max=\"25000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"6\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.02\" data-max=\"0.87\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption style=\"caption-side: top; &#10;                 text-align: center; &#10;                 font-size: 120%;    &#10;                 font-weight: bold;\">March metrics - ECE Score<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72"],["ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3"],[2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000],[1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6,1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6,1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6,1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6],[0.1,0.13,0.03,0.27,0.45,0.45,0.11,0.14,0.04,0.3,0.49,0.45,0.14,0.14,0.05,0.42,0.47,0.37,0.09,0.11,0.04,0.61,0.51,0.87,0.08,0.1,0.02,0.3,0.45,0.41,0.1,0.12,0.02,0.62,0.53,0.39,0.07000000000000001,0.08,0.03,0.44,0.45,0.43,0.07000000000000001,0.09,0.02,0.53,0.62,0.44,0.07000000000000001,0.08,0.03,0.44,0.48,0.3,0.03,0.05,0.03,0.31,0.63,0.72,0.04,0.06,0.02,0.28,0.71,0.6899999999999999,0.05,0.06,0.03,0.33,0.44,0.48]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>submetric<\/th>\n      <th>threshold<\/th>\n      <th>horizon<\/th>\n      <th>value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":18,"scrollX":true,"dom":"Bfrtip","buttons":["copy","csv","excel","pdf"],"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"submetric","targets":1},{"name":"threshold","targets":2},{"name":"horizon","targets":3},{"name":"value","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[10,18,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="calibration-and-reliability" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="calibration-and-reliability"><span class="header-section-number">5.3</span> Calibration and Reliability</h2>
<p>The ECE scores provide a quantitative measure of calibration quality, with class one values, ECE_1, ranging from 0.03 to 0.14 across different thresholds. These relatively low values indicate generally good overall calibration for class one and similar values for the other classes confirm this result. However, the Maximum Calibration Error (MCE) values tell a different story, ranging from 0.27 to 0.62 for class one and from 0.3 to 0.83 for the other classes. This gap between average and maximum calibration errors suggests that while the model is well-calibrated overall, there are specific probability ranges where predictions may be less reliable. These localized miscalibrations could be particularly important in operational contexts, as they might affect decision-making in critical situations. The pattern suggests that the model’s predictions might need additional calibration in specific probability ranges.</p>
<p>The calibration and reliability diagrams provide visual confirmation of these calibration patterns, although the pattern unravels somewhat at the 25,000 threshold level, while revealing class-specific behaviors. The baseline class (no significant displacement) shows consistent reliability, though it seems the model is slightly overconfident in its predictions especially over the middle range of the probability space. Classes 1 and 2 (displacement events with and without sudden increases), on the other hand, show more variance in reliability, whereby the model seems to be slightly under confident in estimating class two, particularly at medium and higher probability ranges, and rather overconfident in its probability estimation of class one. This pattern is particularly evident in the accompanying histograms, which reveal the inherent class imbalance in displacement prediction – a natural consequence of the relative rarity of significant displacement events.</p>
<p>It should be noted that the low occurrence of class one is well reflected in the overall low probability estimates for class one. The LOESS curve breaks off at around <span class="math inline">\(p = 0.35\)</span>, as beyond that point there are simply not enough predictions to calculate the LOESS curve over the entire probability space. However, the model still seems somewhat over confident with respect to class one and might assign relative high probability estimates to cases with a very low risk, thereby having a slight tendency of creating false positives in class one.</p>
<p>These observations show that the discrepancy between ECE and MCE is, therefore, mainly be driven by</p>
<ul>
<li>higher probability ranges in class 1, where the model is over confident,</li>
<li>medium, and to a lesser degree higher, probability ranges in class 2, where the model is under confident,</li>
<li>and medium probability ranges in class 3, where the model is again slightly over confident.</li>
</ul>
<p>With the exception of higher probability ranges in class 2, none of those probability ranges hold many predictions, hence, the weight of those bins will be low in the calculation of the ECE, which explains the overall low ECE value in comparison to the higher MCE.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Threshold 2000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Threshold 5000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">Threshold 10000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">Threshold 25000</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-march-2000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-march-5000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-march-10000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-march-25000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">Threshold 2000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Threshold 5000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false" href="">Threshold 10000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false" href="">Threshold 25000</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-march-2000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-march-5000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-march-10000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-march-25000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="discriminative-ability" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="discriminative-ability"><span class="header-section-number">5.4</span> Discriminative Ability</h2>
<p>The ROC curves demonstrate strong discriminative ability, particularly for shorter prediction horizons and higher displacement thresholds. The curves show good separation between classes, indicating that the model effectively distinguishes between different types of displacement scenarios. The performance degradation across longer prediction horizons is visible in the ROC curves, but the effect is less pronounced for higher thresholds. This suggests that while longer-term predictions are generally more challenging, the model maintains better discriminative ability for larger displacement events even at longer horizons. This characteristic is particularly valuable for early warning purposes, as it indicates the model can provide reliable signals for major displacement events even several months in advance.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href="">Threshold 2000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href="">Threshold 5000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false" href="">Threshold 10000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false" href="">Threshold 25000</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-march-2000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-march-5000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-march-10000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-march-25000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="behaviour-of-class-one" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="behaviour-of-class-one"><span class="header-section-number">5.5</span> Behaviour of Class One</h2>
<p>The kernel density plot over the probabilities of observations that belong or do not belong to class one confirm our earlier findings. While overall the model is able to discriminate well between class one and non-class one observations, there is a considerable overlap in the probability ranges at the lowest threshold level, indicating that for low yearly flows, the model has some difficulties to properly separate class one from classes two and three. However, of more importance is the high discriminatory ability of the model for higher threshold scenarios, which indicate that not only is the model doing very well in identifying large displacement situations, it is also very capable in detecting sudden increases for such situations, which has high operational relevance.</p>
<p><img src="density_plot_year_24_month_march.png" class="img-fluid"></p>
</section>
</section>
<section id="may-2024-predictions" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> May 2024 Predictions</h1>
<section id="fundamental-model-performance-metrics-and-their-implications-1" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="fundamental-model-performance-metrics-and-their-implications-1"><span class="header-section-number">6.1</span> Fundamental Model Performance Metrics and Their Implications</h2>
<p>The model’s overall performance characteristics remain largely consistent with March, supporting the model’s temporal stability. The log loss values for May for lower thresholds, with the 2000-person threshold showing values between 0.25-0.33 remains within the same range as the March values ranging from 0.26-0.31. The same applies for the Brier score, which also lies within a comparable range to March.</p>
<p>For higher thresholds (25000 displaced persons), the model maintains its strong performance with log loss values around 0.20-0.21 and Brier score values around 0.1, nearly identical to March. This consistency in predicting larger displacement events is particularly reassuring, as it suggests the model’s ability to identify major humanitarian crises remains robust across different temporal contexts.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-063d629d1a8e4564c051" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-063d629d1a8e4564c051">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2000\" data-max=\"25000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"6\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.1\" data-max=\"0.44\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption style=\"caption-side: top; &#10;                 text-align: center; &#10;                 font-size: 120%;    &#10;                 font-weight: bold;\">May metrics - Logloss, Brier Score, Entropy Score<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36"],["log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score"],[2000,2000,2000,5000,5000,5000,10000,10000,10000,25000,25000,25000,2000,2000,2000,5000,5000,5000,10000,10000,10000,25000,25000,25000,2000,2000,2000,5000,5000,5000,10000,10000,10000,25000,25000,25000],[1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6],[0.33,0.25,0.28,0.31,0.28,0.28,0.23,0.23,0.23,0.2,0.2,0.21,0.18,0.13,0.14,0.17,0.15,0.14,0.12,0.12,0.11,0.1,0.1,0.11,0.38,0.36,0.36,0.42,0.35,0.44,0.28,0.26,0.29,0.27,0.29,0.27]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>metric_type<\/th>\n      <th>threshold<\/th>\n      <th>horizon<\/th>\n      <th>value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":12,"scrollX":true,"dom":"Bfrtip","buttons":["copy","csv","excel","pdf"],"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"metric_type","targets":1},{"name":"threshold","targets":2},{"name":"horizon","targets":3},{"name":"value","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[10,12,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="uncertainty-and-information-content-1" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="uncertainty-and-information-content-1"><span class="header-section-number">6.2</span> Uncertainty and Information Content</h2>
<p>The entropy scores for May show a particularly interesting pattern that differentiates it from March. For the 5000-person threshold, we observe higher entropy values (0.35-0.44) compared to March, suggesting increased uncertainty in predictions at this intermediate level. This could indicate more complex displacement dynamics during this period, possibly related to seasonal patterns or evolving global conditions or data reporting issues in May that do not compare well with the March data.</p>
</section>
<section id="calibration-and-reliability-1" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="calibration-and-reliability-1"><span class="header-section-number">6.3</span> Calibration and Reliability</h2>
<p>The calibration metrics for May reveal an interesting development in the model’s probability estimates. The ECE values show slightly higher variation across different prediction horizons compared to March, particularly for the middle thresholds (5000 and 10000 displaced persons). This manifests in ECE values ranging from 0.02 to 0.14, with notably higher MCE values reaching up to 0.87 in some cases. This increase in maximum calibration error suggests that while the model maintains good average calibration, it experiences more extreme miscalibrations in specific probability ranges during May predictions.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-1110fccd21f00a0e0df6" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1110fccd21f00a0e0df6">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2000\" data-max=\"25000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"6\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.02\" data-max=\"0.87\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption style=\"caption-side: top; &#10;                 text-align: center; &#10;                 font-size: 120%;    &#10;                 font-weight: bold;\">May metrics - ECE Score<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72"],["ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3"],[2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000],[1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6,1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6,1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6,1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6],[null,0.18,0.04,null,0.66,0.51,0.11,0.14,0.03,0.58,0.49,0.72,0.12,0.14,0.03,0.55,0.64,0.51,null,0.14,0.05,null,0.87,0.61,0.12,0.13,0.03,0.52,0.86,0.54,0.12,0.11,0.05,0.42,0.84,0.33,null,0.09,0.03,null,0.75,0.78,0.07000000000000001,0.09,0.02,0.46,0.85,0.72,0.07000000000000001,0.08,0.02,0.44,0.52,0.32,null,0.08,0.04,null,0.76,0.65,0.06,0.07000000000000001,0.04,0.43,0.57,0.44,0.06,0.08,0.04,0.53,0.66,0.47]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>submetric<\/th>\n      <th>threshold<\/th>\n      <th>horizon<\/th>\n      <th>value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":18,"scrollX":true,"dom":"Bfrtip","buttons":["copy","csv","excel","pdf"],"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"submetric","targets":1},{"name":"threshold","targets":2},{"name":"horizon","targets":3},{"name":"value","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[10,18,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true" href="">Threshold 2000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false" href="">Threshold 5000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false" href="">Threshold 10000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-4" role="tab" aria-controls="tabset-4-4" aria-selected="false" href="">Threshold 25000</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-may-2000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-may-5000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-may-10000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-4-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-may-25000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="discriminative-ability-1" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="discriminative-ability-1"><span class="header-section-number">6.4</span> Discriminative Ability</h2>
<p>The reliability diagrams for May show some subtle but important differences from March, particularly in the treatment of class one events (sudden increases in displacement). The model appears to show slightly improved discrimination for these events at longer horizons, suggesting possible improvements in identifying early warning signals for sudden displacement increases. However, it should be noted that class one occurrences are absent in the real observations for the month of June, which creates some issues with the evaluation of the one month prediction for May. Additionally, the occurrence of only one class one incident in June-August, means that no distribution can be derived over the class one probabilities of this group, which is why these kernels are missing for both the one and three months predictions.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true" href="">Threshold 2000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false" href="">Threshold 5000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false" href="">Threshold 10000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-4" role="tab" aria-controls="tabset-5-4" aria-selected="false" href="">Threshold 25000</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-may-2000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-may-5000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-may-10000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-4-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-may-25000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true" href="">Threshold 2000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false" href="">Threshold 5000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false" href="">Threshold 10000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-4" role="tab" aria-controls="tabset-6-4" aria-selected="false" href="">Threshold 25000</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-may-2000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-may-5000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-may-10000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-4-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-may-25000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p><img src="density_plot_year_24_month_may.png" class="img-fluid"></p>
<p>Overall, these observations suggest that while the model maintains its fundamental predictive capabilities in May, it encounters some slight challenges, particularly at intermediate thresholds and in calibration extremes - maybe due to data issues for the predicted months.</p>
</section>
</section>
<section id="june-2024-predictions" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> June 2024 Predictions</h1>
<section id="fundamental-model-performance-metrics-and-their-implications-2" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="fundamental-model-performance-metrics-and-their-implications-2"><span class="header-section-number">7.1</span> Fundamental Model Performance Metrics and Their Implications</h2>
<p>The June predictions demonstrate strong consistency with the patterns observed in March and May, reinforcing the temporal stability of the model. The log loss values remain in similar ranges across all thresholds, with values between 0.25-0.34 for lower thresholds and 0.22-0.24 for the highest threshold (25000 displaced persons). Likewise, the Brier score remains in the same low range as in March and May. This consistency suggests that the model’s fundamental predictive capabilities remain stable across the spring and early summer months.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-520d66f4aee96bb10cd3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-520d66f4aee96bb10cd3">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2000\" data-max=\"25000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"6\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.1\" data-max=\"0.36\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption style=\"caption-side: top; &#10;                 text-align: center; &#10;                 font-size: 120%;    &#10;                 font-weight: bold;\">June metrics - Logloss, Brier Score, Entropy Score<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36"],["log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score"],[2000,2000,2000,5000,5000,5000,10000,10000,10000,25000,25000,25000,2000,2000,2000,5000,5000,5000,10000,10000,10000,25000,25000,25000,2000,2000,2000,5000,5000,5000,10000,10000,10000,25000,25000,25000],[1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6],[0.25,0.28,0.27,0.34,0.32,0.31,0.29,0.24,0.25,0.24,0.25,0.22,0.12,0.14,0.13,0.17,0.15,0.15,0.15,0.12,0.12,0.1,0.14,0.1,0.36,0.34,0.33,0.32,0.33,0.33,0.33,0.31,0.29,0.24,0.25,0.35]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>metric_type<\/th>\n      <th>threshold<\/th>\n      <th>horizon<\/th>\n      <th>value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":12,"scrollX":true,"dom":"Bfrtip","buttons":["copy","csv","excel","pdf"],"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"metric_type","targets":1},{"name":"threshold","targets":2},{"name":"horizon","targets":3},{"name":"value","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[10,12,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="calibration-and-uncertainty-patterns" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="calibration-and-uncertainty-patterns"><span class="header-section-number">7.2</span> Calibration and Uncertainty Patterns</h2>
<p>The calibration metrics for June continue to show the same general patterns observed in previous months. The ECE values consistently remain in the 0.03-0.11 range, indicating stable overall calibration performance. The MCE values, while high (ranging from 0.29-0.83), are comparable to those seen in March and May. This persistent gap between ECE and MCE across all three months suggests a structural characteristic of the model rather than temporal variation - the model consistently shows good average calibration while experiencing more significant miscalibrations in specific probability ranges.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-4e022d61361f95ad3a19" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4e022d61361f95ad3a19">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2000\" data-max=\"25000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"6\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.03\" data-max=\"0.83\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption style=\"caption-side: top; &#10;                 text-align: center; &#10;                 font-size: 120%;    &#10;                 font-weight: bold;\">June metrics - ECE Score<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72"],["ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3"],[2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000],[1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6,1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6,1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6,1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6],[0.1,0.1,0.05,0.41,0.83,0.78,0.09,0.11,0.03,0.5,0.64,0.63,0.09,0.1,0.03,0.32,0.46,0.55,0.09,0.1,0.05,0.5600000000000001,0.78,0.75,0.09,0.09,0.05,0.45,0.66,0.5600000000000001,0.09,0.09,0.04,0.43,0.42,0.33,0.09,0.08,0.04,0.5600000000000001,0.63,0.53,0.07000000000000001,0.06,0.04,0.33,0.76,0.6899999999999999,0.07000000000000001,0.07000000000000001,0.05,0.45,0.32,0.6899999999999999,0.06,0.05,0.05,0.45,0.36,0.35,0.07000000000000001,0.08,0.03,0.55,0.47,0.38,0.07000000000000001,0.06,0.06,0.44,0.55,0.29]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>submetric<\/th>\n      <th>threshold<\/th>\n      <th>horizon<\/th>\n      <th>value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":18,"scrollX":true,"dom":"Bfrtip","buttons":["copy","csv","excel","pdf"],"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"submetric","targets":1},{"name":"threshold","targets":2},{"name":"horizon","targets":3},{"name":"value","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[10,18,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true" href="">Threshold 2000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false" href="">Threshold 5000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false" href="">Threshold 10000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-4" role="tab" aria-controls="tabset-7-4" aria-selected="false" href="">Threshold 25000</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-june-2000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-june-5000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-june-10000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-7-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-4-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-june-25000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="threshold-dependent-performance" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="threshold-dependent-performance"><span class="header-section-number">7.3</span> Threshold-Dependent Performance</h2>
<p>The model maintains its characteristic pattern of improved performance at higher displacement thresholds, a feature that has remained consistent across all analysed months. The entropy scores continue to show lower values (indicating higher certainty) for higher thresholds, with values around 0.24-0.35 for the 25000-person threshold, closely matching the patterns seen in previous months.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true" href="">Threshold 2000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false" href="">Threshold 5000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-3" role="tab" aria-controls="tabset-8-3" aria-selected="false" href="">Threshold 10000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-4" role="tab" aria-controls="tabset-8-4" aria-selected="false" href="">Threshold 25000</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-june-2000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-june-5000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-8-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-3-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-june-10000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-8-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-4-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-june-25000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="stability-in-discriminative-ability" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="stability-in-discriminative-ability"><span class="header-section-number">7.4</span> Stability in Discriminative Ability</h2>
<p>The ROC curves and kernel density plots for June show similar discriminative capabilities to those observed in March and May, particularly in the model’s ability to distinguish between different classes of displacement events. This consistency in discriminative performance across months provides further evidence of the model’s robust and stable behavior.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true" href="">Threshold 2000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false" href="">Threshold 5000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-3" role="tab" aria-controls="tabset-9-3" aria-selected="false" href="">Threshold 10000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-4" role="tab" aria-controls="tabset-9-4" aria-selected="false" href="">Threshold 25000</a></li></ul>
<div class="tab-content">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-june-2000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-june-5000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-9-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-3-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-june-10000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-9-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-4-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-june-25000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>These observations support a conclusion that the model demonstrates strong temporal stability, with variations between months more likely representing normal statistical fluctuation rather than meaningful temporal or seasonal patterns. This stability is particularly valuable from an operational perspective, as it suggests that the model’s performance characteristics and limitations remain consistent and predictable across different time periods.</p>
<p><img src="density_plot_year_24_month_june.png" class="img-fluid"></p>
</section>
</section>
<section id="july-2024-predictions" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> July 2024 Predictions</h1>
<p>The July results are in in line with the previous months and do not display any significant deviations from the previous months.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-ddd55de6a6cc5508010e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ddd55de6a6cc5508010e">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2000\" data-max=\"25000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"6\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.1\" data-max=\"0.36\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption style=\"caption-side: top; &#10;                 text-align: center; &#10;                 font-size: 120%;    &#10;                 font-weight: bold;\">July metrics - Logloss, Brier Score, Entropy Score<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36"],["log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","log_loss_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","brier_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score","entropy_score"],[2000,2000,2000,5000,5000,5000,10000,10000,10000,25000,25000,25000,2000,2000,2000,5000,5000,5000,10000,10000,10000,25000,25000,25000,2000,2000,2000,5000,5000,5000,10000,10000,10000,25000,25000,25000],[1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6,1,3,6],[0.25,0.28,0.27,0.34,0.32,0.31,0.29,0.24,0.25,0.24,0.25,0.22,0.12,0.14,0.13,0.17,0.15,0.15,0.15,0.12,0.12,0.1,0.14,0.1,0.36,0.34,0.33,0.32,0.33,0.33,0.33,0.31,0.29,0.24,0.25,0.35]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>metric_type<\/th>\n      <th>threshold<\/th>\n      <th>horizon<\/th>\n      <th>value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":12,"scrollX":true,"dom":"Bfrtip","buttons":["copy","csv","excel","pdf"],"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"metric_type","targets":1},{"name":"threshold","targets":2},{"name":"horizon","targets":3},{"name":"value","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[10,12,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-598e8f2319fd468fc3ff" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-598e8f2319fd468fc3ff">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2000\" data-max=\"25000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"6\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.03\" data-max=\"0.83\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption style=\"caption-side: top; &#10;                 text-align: center; &#10;                 font-size: 120%;    &#10;                 font-weight: bold;\">July metrics - ECE Score<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72"],["ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3","ece_1","ece_2","ece_3","mce_1","mce_2","mce_3"],[2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,2000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,5000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000,25000],[1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6,1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6,1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6,1,1,1,1,1,1,3,3,3,3,3,3,6,6,6,6,6,6],[0.1,0.1,0.05,0.41,0.83,0.78,0.09,0.11,0.03,0.5,0.64,0.63,0.09,0.1,0.03,0.32,0.46,0.55,0.09,0.1,0.05,0.5600000000000001,0.78,0.75,0.09,0.09,0.05,0.45,0.66,0.5600000000000001,0.09,0.09,0.04,0.43,0.42,0.33,0.09,0.08,0.04,0.5600000000000001,0.63,0.53,0.07000000000000001,0.06,0.04,0.33,0.76,0.6899999999999999,0.07000000000000001,0.07000000000000001,0.05,0.45,0.32,0.6899999999999999,0.06,0.05,0.05,0.45,0.36,0.35,0.07000000000000001,0.08,0.03,0.55,0.47,0.38,0.07000000000000001,0.06,0.06,0.44,0.55,0.29]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>submetric<\/th>\n      <th>threshold<\/th>\n      <th>horizon<\/th>\n      <th>value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":18,"scrollX":true,"dom":"Bfrtip","buttons":["copy","csv","excel","pdf"],"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"submetric","targets":1},{"name":"threshold","targets":2},{"name":"horizon","targets":3},{"name":"value","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[10,18,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true" href="">Threshold 2000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false" href="">Threshold 5000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-3" role="tab" aria-controls="tabset-10-3" aria-selected="false" href="">Threshold 10000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-4" role="tab" aria-controls="tabset-10-4" aria-selected="false" href="">Threshold 25000</a></li></ul>
<div class="tab-content">
<div id="tabset-10-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-july-2000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-10-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-july-5000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-10-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-3-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-july-10000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-10-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-4-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/calibration-july-25000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-11-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-1" role="tab" aria-controls="tabset-11-1" aria-selected="true" href="">Threshold 2000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-2" role="tab" aria-controls="tabset-11-2" aria-selected="false" href="">Threshold 5000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-3" role="tab" aria-controls="tabset-11-3" aria-selected="false" href="">Threshold 10000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-4" role="tab" aria-controls="tabset-11-4" aria-selected="false" href="">Threshold 25000</a></li></ul>
<div class="tab-content">
<div id="tabset-11-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-11-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-july-2000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-11-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-2-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-july-5000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-11-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-3-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-july-10000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-11-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-4-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/reliability-july-25000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-12-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-1" role="tab" aria-controls="tabset-12-1" aria-selected="true" href="">Threshold 2000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-2" role="tab" aria-controls="tabset-12-2" aria-selected="false" href="">Threshold 5000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-3" role="tab" aria-controls="tabset-12-3" aria-selected="false" href="">Threshold 10000</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-4" role="tab" aria-controls="tabset-12-4" aria-selected="false" href="">Threshold 25000</a></li></ul>
<div class="tab-content">
<div id="tabset-12-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-12-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-july-2000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-12-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-2-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-july-5000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-12-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-3-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-july-10000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-12-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-4-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/roc-july-25000-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p><img src="density_plot_year_24_month_july.png" class="img-fluid"></p>
</section>
<section id="cross-monthly-comparison" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Cross-Monthly Comparison</h1>
<p>The temporal stability analysis across March, May, June, and July 2024 provides important insights into our early warning model’s reliability and consistency. By examining the model’s performance across different months, we can assess both its stability and any potential temporal patterns that might affect its predictive capabilities.</p>
<section id="performance-metrics-across-time" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="performance-metrics-across-time"><span class="header-section-number">9.1</span> Performance Metrics Across Time</h2>
<p>Looking at the cross-monthly comparison plots, we observe remarkably stable performance patterns across all four months. The visualization presents three key metrics - log loss, Brier score, and entropy score - tracked across months for different displacement thresholds and prediction horizons. The relatively flat trend lines across months indicate consistent model performance, with variations generally falling within expected statistical fluctuation ranges rather than suggesting meaningful temporal patterns.</p>
<section id="log-loss-performance" class="level3" data-number="9.1.1">
<h3 data-number="9.1.1" class="anchored" data-anchor-id="log-loss-performance"><span class="header-section-number">9.1.1</span> Log Loss Performance</h3>
<p>The log loss metric, which measures the accuracy of probabilistic predictions by heavily penalizing confident but incorrect predictions, shows highly stable patterns. For the highest threshold (25000 displaced persons), we observe values consistently ranging between 0.17-0.25 across all months. This stability at high thresholds is particularly important as it indicates reliable prediction of major displacement events. The lower thresholds (2000-10000 displaced persons) show slightly higher values ranging from 0.25-0.33, but importantly, these variations appear random rather than systematic across months. When interpreting these values, it’s crucial to understand that log loss values below 0.3 indicate strong predictive performance for a three-class problem. Therefore, our model maintains good to excellent performance levels throughout the evaluation period, with the most crucial predictions (large displacement events) showing the most stable and strongest performance.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/across-predictive-months-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/across-predictive-months-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="evaluation_report_files/figure-html/across-predictive-months-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="brier-score-evolution" class="level3" data-number="9.1.2">
<h3 data-number="9.1.2" class="anchored" data-anchor-id="brier-score-evolution"><span class="header-section-number">9.1.2</span> Brier Score Evolution</h3>
<p>The Brier score, which directly measures the accuracy of probabilistic predictions, demonstrates similar stability. Values consistently range from 0.08-0.17 across all months, with higher thresholds again showing better and more stable performance (0.08-0.14). This metric is particularly valuable for understanding prediction accuracy as it represents the mean squared error of probabilistic predictions. The consistency of these scores suggests that the model’s probabilistic predictions maintain their reliability regardless of the temporal context.</p>
</section>
<section id="entropy-score-patterns" class="level3" data-number="9.1.3">
<h3 data-number="9.1.3" class="anchored" data-anchor-id="entropy-score-patterns"><span class="header-section-number">9.1.3</span> Entropy Score Patterns</h3>
<p>The entropy scores, measuring prediction uncertainty, reveal an interesting pattern of stable uncertainty levels across months. Higher thresholds consistently show lower entropy values (0.21-0.35), indicating more confident predictions for larger displacement events. Lower thresholds show higher but stable entropy values (0.33-0.49), suggesting consistently higher uncertainty in predicting smaller displacement events. This pattern remains remarkably consistent across all evaluation months, indicating that the model’s confidence levels are tied to the magnitude of displacement rather than temporal factors.</p>
<p>This consistent performance across time is particularly significant for several reasons:</p>
<ul>
<li>It suggests that the model has successfully captured fundamental patterns in displacement dynamics rather than being influenced by seasonal or random variations.</li>
<li>The stability of performance metrics indicates that the model’s predictions can be interpreted with similar confidence levels throughout the year.</li>
<li>The consistent relationship between threshold levels and performance metrics suggests that the model’s strengths and limitations are structural rather than temporal.</li>
</ul>
<p>Moreover, the visualization of these metrics across months shows so far no significant trends or seasonal patterns, with variations appearing random and within expected statistical fluctuations. This observation strengthens our confidence in the model’s temporal robustness and suggests that any variations we do observe are more likely due to inherent prediction challenges rather than temporal instability.</p>
</section>
</section>
<section id="calibration-stability" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="calibration-stability"><span class="header-section-number">9.2</span> Calibration Stability</h2>
<p>The stability of model calibration across months provides important insights into the reliability of our predicted probabilities. Calibration, which measures how well predicted probabilities align with observed frequencies, shows consistent patterns that help us understand both the strengths and limitations of our early warning model.</p>
<section id="expected-calibration-error-analysis" class="level3" data-number="9.2.1">
<h3 data-number="9.2.1" class="anchored" data-anchor-id="expected-calibration-error-analysis"><span class="header-section-number">9.2.1</span> Expected Calibration Error Analysis</h3>
<p>The Expected Calibration Error (ECE) demonstrates strong consistency across all four months, maintaining values between 0.03 and 0.18. To put these values in context, ECE scores below 0.10 generally indicate well-calibrated predictions in multi-class problems. Our model consistently achieves these low calibration levels regardless of the temporal context. This stability in ECE suggests that the model’s average calibration properties remain reliable throughout different months, providing confidence in the overall probability estimates.</p>
</section>
<section id="maximum-calibration-error-patterns" class="level3" data-number="9.2.2">
<h3 data-number="9.2.2" class="anchored" data-anchor-id="maximum-calibration-error-patterns"><span class="header-section-number">9.2.2</span> Maximum Calibration Error Patterns</h3>
<p>While the ECE shows strong stability, the Maximum Calibration Error (MCE) values reveal a more nuanced picture of calibration behavior. The MCE values consistently range from 0.3 to 0.83 across all months, indicating significant localized calibration challenges that persist throughout the evaluation period.</p>
<p>The persistent pattern observed between ECE and MCE values across all evaluation months reveals important characteristics about our model’s probabilistic calibration properties. While ECE quantifies the average deviation between predicted probabilities and observed frequencies, MCE identifies the maximum magnitude of these deviations. Our analysis consistently shows low ECE values (0.03-0.18) coupled with substantially higher MCE values (0.3-0.83), indicating a systematic pattern in probability estimation. This discrepancy suggests that while the model maintains strong average calibration performance, it exhibits rare but notable miscalibration in specific probability ranges, as outlined in more detail in the March chapter. The consistency of this pattern across temporal intervals indicates that this calibration characteristic is intrinsic to the model’s probability estimation framework rather than a temporal phenomenon.</p>
</section>
<section id="threshold-dependent-calibration-stability" class="level3" data-number="9.2.3">
<h3 data-number="9.2.3" class="anchored" data-anchor-id="threshold-dependent-calibration-stability"><span class="header-section-number">9.2.3</span> Threshold-Dependent Calibration Stability</h3>
<p>Looking at calibration across different displacement thresholds reveals another stable pattern. Higher thresholds (25000 displaced persons) consistently show better calibration properties, with more stable ECE values around 0.05-0.07 across months. Lower thresholds show slightly higher but equally stable ECE values, typically ranging from 0.07-0.10. This consistency in threshold-dependent calibration behavior suggests that the model’s probability estimates are more reliable for larger displacement events, a pattern that holds true regardless of the temporal context.</p>
<p>The stability in calibration metrics across months has important implications for how we interpret the model’s probability estimates:</p>
<ul>
<li>Users can apply consistent interpretation frameworks across different months, knowing that the calibration characteristics remain stable.</li>
<li>The persistent gap between ECE and MCE suggests that extra caution is always needed when interpreting probability predictions in the outlined probability ranges, regardless of the temporal context.</li>
<li>The consistent threshold-dependent patterns allow users to adjust their confidence in probability estimates based on the displacement threshold being considered.</li>
</ul>
</section>
</section>
<section id="threshold-dependent-patterns" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="threshold-dependent-patterns"><span class="header-section-number">9.3</span> Threshold-Dependent Patterns</h2>
<p>The cross-monthly analysis reveals consistent and systematic relationships between displacement thresholds and model performance metrics. This threshold-dependent behavior manifests consistently across all evaluation months (March, May, June, and July 2024), suggesting fundamental characteristics in the model’s ability to predict forced displacement at different scales.</p>
<section id="performance-differentiation-across-thresholds" class="level3" data-number="9.3.1">
<h3 data-number="9.3.1" class="anchored" data-anchor-id="performance-differentiation-across-thresholds"><span class="header-section-number">9.3.1</span> Performance Differentiation Across Thresholds</h3>
<p>The model demonstrates a clear and consistent pattern of improved performance as displacement thresholds increase. For the highest threshold (25000 displaced persons), we observe consistently superior metrics across all evaluation months: log loss values maintain a narrow range of 0.22-0.24, while lower thresholds (2000-5000 displaced persons) show higher values ranging from 0.25-0.34. This pattern indicates that the model’s predictive capabilities are more refined for larger displacement events, likely due to these events having more distinct and detectable precursor signals.</p>
</section>
<section id="entropy-and-prediction-confidence" class="level3" data-number="9.3.2">
<h3 data-number="9.3.2" class="anchored" data-anchor-id="entropy-and-prediction-confidence"><span class="header-section-number">9.3.2</span> Entropy and Prediction Confidence</h3>
<p>The relationship between thresholds and prediction confidence, as measured by entropy scores, exhibits high consistency across the temporal dimension. Higher thresholds consistently demonstrate lower entropy values (0.21-0.25), indicating greater prediction confidence for larger displacement events. Conversely, lower thresholds show persistently higher entropy values (0.35-0.49), suggesting greater uncertainty in predicting smaller displacement events. This consistent pattern implies that the model’s confidence levels are fundamentally tied to the magnitude of the displacement event rather than temporal factors.</p>
</section>
<section id="calibration-properties-across-thresholds" class="level3" data-number="9.3.3">
<h3 data-number="9.3.3" class="anchored" data-anchor-id="calibration-properties-across-thresholds"><span class="header-section-number">9.3.3</span> Calibration Properties Across Thresholds</h3>
<p>The calibration characteristics show systematic variation across thresholds while maintaining temporal stability. Higher thresholds consistently display better calibration properties, with ECE values typically ranging from 0.05-0.07. Lower thresholds, while showing slightly higher ECE values (typically ranging from 0.07-0.10), maintain these levels consistently across months. This stability in threshold-dependent calibration suggests that the model’s probability estimates become more reliable as the magnitude of displacement increases.</p>
</section>
<section id="discriminative-ability-and-threshold-effects" class="level3" data-number="9.3.4">
<h3 data-number="9.3.4" class="anchored" data-anchor-id="discriminative-ability-and-threshold-effects"><span class="header-section-number">9.3.4</span> Discriminative Ability and Threshold Effects</h3>
<p>The model’s ability to discriminate between different classes of displacement events, as evidenced by ROC curve analysis and density plots, shows consistent threshold-dependent patterns. Higher thresholds consistently achieve better class separation across all evaluation months, with particularly strong performance in distinguishing between major displacement events and baseline conditions. This superior discriminative ability for larger events remains stable across the temporal dimension, indicating a robust capability to identify significant humanitarian crises.</p>
<p>The consistency of these threshold-dependent patterns has significant implications for the operational deployment of the early warning model:</p>
<ul>
<li>The model provides more reliable predictions for larger displacement events, allowing for greater confidence in identifying major humanitarian crises.</li>
<li>The stability of these patterns suggests that confidence levels in predictions can be appropriately adjusted based on the magnitude of potential displacement events, regardless of the temporal context.</li>
</ul>
</section>
</section>
<section id="prediction-horizon-effects" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="prediction-horizon-effects"><span class="header-section-number">9.4</span> Prediction Horizon Effects</h2>
<p>The analysis of prediction horizons (1, 3, and 6 months) across our evaluation period does not reveal any systematic patterns in how temporal distance affects prediction accuracy.</p>
<section id="temporal-degradation-patterns" class="level3" data-number="9.4.1">
<h3 data-number="9.4.1" class="anchored" data-anchor-id="temporal-degradation-patterns"><span class="header-section-number">9.4.1</span> Temporal Degradation Patterns</h3>
<p>Our analysis shows mixed signals with regard to a potential degradation in predictive performance as the forecast horizon extends from 1 to 6 months. While we can observe a rather consistent temporal degradation pattern across all metrics for the March predictions, we can not find an equivalent pattern for the remaining months. This finding is confirmed by the median log loss, Brier, and entropy scores for each of the three predictive months across all threshold levels, where no clear pattern emerges. So far our results prove surprisingly stable across all predictive horizons, in particular for larger threshold values. However, this needs to be seen in light of the fact that only March includes evaluations for the full six months, while all other months are cut short by missing data on the true classes.</p>
</section>
<section id="horizon-dependent-uncertainty" class="level3" data-number="9.4.2">
<h3 data-number="9.4.2" class="anchored" data-anchor-id="horizon-dependent-uncertainty"><span class="header-section-number">9.4.2</span> Horizon-Dependent Uncertainty</h3>
<p>The relationship between prediction horizons and uncertainty, as measured by entropy scores, also shows no consistent pattern of temporal degradation. While entropy scores increase over the length of the predictive horizon for the March predictions, no such pattern can be observed for the other months. It is at this point difficult, to reach a conclusion as to whether the predictive uncertainty increases with the predictive horizon. This point should be monitored further.</p>
</section>
<section id="calibration-stability-across-horizons" class="level3" data-number="9.4.3">
<h3 data-number="9.4.3" class="anchored" data-anchor-id="calibration-stability-across-horizons"><span class="header-section-number">9.4.3</span> Calibration Stability Across Horizons</h3>
<p>The model’s calibration properties show interesting horizon-dependent patterns. While for the March predictions, the ECE values show modest increases with longer prediction horizons, the relationship between ECE and MCE maintains consistent proportions regardless of the temporal context. This suggests that while prediction confidence appropriately decreases with longer horizons, the fundamental reliability of the probability estimates remains structurally similar. However, it should be noted that this pattern does not apply to the other evaluation periods.</p>
<ul>
<li>The current inconsistency of temporal patterns across the evaluation months requires further data and monitoring to reach any final conclusions on as to whether the prediction horizon negatiely impacts the predictive quality. Although it would be expected that longer prediction horizons lead to more uncertainty of the probability estimates, we can only see such a pattern for the March evaluation, but not for any of the other evaluation months.</li>
</ul>
</section>
</section>
</section>
<section id="conclusions-and-recommendations" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Conclusions and Recommendations</h1>
<p>The evaluation of the Early Warning model’s performance across March, May, June, and July 2024 provides insights about its capabilities, limitations, and operational value for forced displacement prediction.</p>
<p>The model shows consistent performance across the evaluated months, particularly for higher displacement thresholds. For the 25,000 displaced persons threshold, log loss values remain between 0.22-0.24 and Brier scores between 0.08-0.10. This stability across different temporal contexts indicates that the model captures fundamental patterns in displacement dynamics.</p>
<p>The model’s performance improves with higher displacement thresholds. As the threshold increases from 2,000 to 25,000 displaced persons, performance metrics show systematic improvement. This pattern persists across evaluation months and prediction horizons, indicating reliable prediction capabilities for larger displacement events.</p>
<p>The calibration analysis reveals important characteristics for operational interpretation. The Expected Calibration Error (ECE) maintains values between 0.03-0.18, while Maximum Calibration Error (MCE) values range from 0.3-0.83. This gap between ECE and MCE values indicates that probability estimates require careful interpretation, particularly for high-probability predictions in class one.</p>
<p>Model performance so far shows no systematic changes across prediction horizons. Performance metrics vary as the prediction horizon extends from 1 to 6 months, following no clear pattern. Some observed degradation affects predictions for lower thresholds more strongly than those for higher thresholds, however, the data at this point is insufficient to reach a final conclusion on this point.</p>
<p>Recommendations for operational use:</p>
<ol type="1">
<li>Threshold-Based Implementation</li>
</ol>
<ul>
<li>Add different confidence levels based on displacement magnitude, where predictions for higher thresholds are reported with higher confidence than those at lower threshold levels</li>
<li>Add additional verification from other sources for predictions in the 2,000-5,000 range</li>
</ul>
<ol start="2" type="1">
<li>Calibration Considerations</li>
</ol>
<ul>
<li>Ideally implement adjustments for high probability predictions i class one</li>
<li>Develop probability interpretation guidelines based on calibration patterns</li>
</ul>
<p>Development priorities:</p>
<ol type="1">
<li>Model Improvements</li>
</ol>
<ul>
<li>Address recalibration of high-probability predictions in class one and two</li>
<li>Further reduce uncertainty for lower displacement thresholds</li>
<li>Add predictive intervals to probabilities</li>
</ul>
<ol start="2" type="1">
<li>Validation Procedures</li>
</ol>
<ul>
<li>Continue performance monitoring across temporal contexts</li>
<li>Track significant prediction deviations</li>
</ul>
<ol start="3" type="1">
<li>Operational Integration</li>
</ol>
<ul>
<li>Create guidelines for integrating predictions into warning protocols</li>
<li>Establish procedures for combining model outputs with other information, e.g., qualitative risk data from risk monitoring</li>
</ul>
<p>Our overall conclusion is that the Early Warning model functions as a tool for predicting forced displacement risk at country level, with a particular reliability for large-scale events. Its consistent performance patterns and high reliability indicators make it suitable for humanitarian planning and response when used with appropriate consideration of its capabilities and limitations as outlined in this report.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>